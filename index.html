<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análisis Interactivo | Cuenca del Río Canoabo</title>
    
    <!-- Chosen Palette: Calm Earth & Sky -->
    <!-- Application Structure Plan: A tab-based, single-page dashboard. This structure allows users to explore the report's key themes (Overview, Climate, Soils, Erosion, Zoning) in a non-linear way, facilitating focused understanding. The flow guides the user from general context to specific challenges and finally to actionable recommendations, mirroring a logical discovery path. Key interactions include tab navigation to switch views, and hover/click events on charts to reveal detailed information, making the data digestible and engaging. This is more user-friendly than a long-scrolling page, as it chunks information into manageable, thematic sections. -->
    <!-- Visualization & Content Choices: 
        - Overview: Key stats (HTML) to provide immediate context. Goal: Inform. Justification: Fast delivery of core metrics.
        - Climate: Donut chart (Chart.js) for Life Zone distribution. Goal: Compare proportions. Justification: Excellent for showing parts of a whole. Climosequence diagram (HTML/CSS) to visualize altitude's effect. Goal: Show relationships. Justification: A powerful, non-chart visual that explains a core concept of the report.
        - Soils: Donut chart for soil types. Goal: Compare proportions. Interactive text blocks for soil properties. Goal: Inform with detail on demand. Justification: Prevents UI clutter by hiding detailed text until requested by the user via clicks.
        - Erosion: Bar chart for erosion levels. Goal: Compare quantities. Donut chart for fragility. Goal: Compare proportions. Justification: Standard, clear charts for categorical data.
        - Zoning: Donut chart for land use recommendations. Goal: Synthesize & Recommend. Justification: Clearly presents the final, actionable output of the study. Interactive text blocks explain each category on click.
        - Library: Chart.js for all charts due to its simplicity, responsiveness, and canvas-based rendering.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f4f5; /* Zinc 100 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .tab-button.active {
            border-color: #3b82f6; /* Blue 500 */
            background-color: #eff6ff; /* Blue 50 */
            color: #1e3a8a; /* Blue 900 */
            font-weight: 600;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            margin-right: 0.5em;
            vertical-align: -0.125em;
        }
    </style>
</head>

<body class="antialiased text-slate-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900">Análisis Interactivo de la Cuenca del Río Canoabo</h1>
            <p class="mt-2 text-lg text-slate-600">Basado en los estudios de V. Sevilla L. y colaboradores</p>
        </header>

        <main class="bg-white rounded-2xl shadow-lg p-4 sm:p-6">
            <nav class="flex flex-wrap justify-center border-b border-slate-200 mb-6 -mt-2">
                <button data-tab="overview" class="tab-button text-sm sm:text-base px-3 py-3 sm:px-4 sm:py-4 border-b-2 border-transparent hover:border-blue-500 hover:bg-blue-50 transition-colors duration-200">
                    <span class="icon">&#127758;</span>Visión General
                </button>
                <button data-tab="climate" class="tab-button text-sm sm:text-base px-3 py-3 sm:px-4 sm:py-4 border-b-2 border-transparent hover:border-blue-500 hover:bg-blue-50 transition-colors duration-200">
                    <span class="icon">&#127780;</span>Clima y Zonas de Vida
                </button>
                <button data-tab="soils" class="tab-button text-sm sm:text-base px-3 py-3 sm:px-4 sm:py-4 border-b-2 border-transparent hover:border-blue-500 hover:bg-blue-50 transition-colors duration-200">
                    <span class="icon">&#127810;</span>Suelos
                </button>
                <button data-tab="erosion" class="tab-button text-sm sm:text-base px-3 py-3 sm:px-4 sm:py-4 border-b-2 border-transparent hover:border-blue-500 hover:bg-blue-50 transition-colors duration-200">
                    <span class="icon">&#127792;</span>Erosión y Fragilidad
                </button>
                <button data-tab="zoning" class="tab-button text-sm sm:text-base px-3 py-3 sm:px-4 sm:py-4 border-b-2 border-transparent hover:border-blue-500 hover:bg-blue-50 transition-colors duration-200">
                    <span class="icon">&#128204;</span>Zonificación
                </button>
            </nav>

            <div id="tab-content">
                <!-- Visión General Section -->
                <section id="overview" class="content-section">
                    <div class="p-2">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">Una Cuenca de Importancia Estratégica</h2>
                        <p class="text-slate-600 mb-6 leading-relaxed">
                            La Cuenca del Río Canoabo es un área de vital importancia para Venezuela. No solo provee agua a cerca de 300,000 personas e industrias clave, sino que también sustenta a 6,500 habitantes a través de la agricultura. Sin embargo, enfrenta desafíos significativos de degradación ambiental que amenazan su sostenibilidad a largo plazo. Esta aplicación interactiva desglosa los hallazgos clave del estudio para facilitar su comprensión.
                        </p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                            <div class="bg-slate-50 p-4 rounded-lg shadow-sm">
                                <p class="text-3xl font-bold text-blue-600">14,508</p>
                                <p class="text-slate-500">Hectáreas</p>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-lg shadow-sm">
                                <p class="text-3xl font-bold text-blue-600">6,500</p>
                                <p class="text-slate-500">Habitantes</p>
                            </div>
                             <div class="bg-slate-50 p-4 rounded-lg shadow-sm">
                                <p class="text-3xl font-bold text-blue-600">36.7M</p>
                                <p class="text-slate-500">m³ de Agua/Año</p>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-lg shadow-sm">
                                <p class="text-3xl font-bold text-blue-600">1,700m</p>
                                <p class="text-slate-500">Altitud Máxima</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Clima y Zonas de Vida Section -->
                <section id="climate" class="content-section">
                     <div class="p-2">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">Clima, Altitud y Ecosistemas</h2>
                        <p class="text-slate-600 mb-6 leading-relaxed">
                            El clima de la cuenca está fuertemente definido por la altitud, creando una "climosecuencia" que da lugar a distintas Zonas de Vida. La precipitación y temperatura varían significativamente desde el valle hasta las cimas, afectando todo, desde los tipos de suelo hasta la producción de agua.
                        </p>
                        <div class="grid md:grid-cols-2 gap-8 items-center">
                            <div>
                                <h3 class="text-xl font-semibold text-center text-slate-700 mb-2">Distribución de Zonas de Vida</h3>
                                <div class="chart-container">
                                    <canvas id="lifeZonesChart"></canvas>
                                </div>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-lg shadow-sm">
                                 <h3 class="text-xl font-semibold text-center text-slate-700 mb-4">Climosecuencia de la Cuenca</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-center justify-between bg-blue-100 p-2 rounded"><span><strong>1700m:</strong> Bosque Húmedo (nublado)</span><span class="font-mono text-blue-800">10-12 meses húmedos</span></div>
                                    <div class="text-center text-slate-400">▼</div>
                                    <div class="flex items-center justify-between bg-green-100 p-2 rounded"><span><strong>800m:</strong> Bosque Seco Premontano</span><span class="font-mono text-green-800">~8 meses húmedos</span></div>
                                    <div class="text-center text-slate-400">▼</div>
                                    <div class="flex items-center justify-between bg-yellow-100 p-2 rounded"><span><strong>135m:</strong> Bosque Seco Tropical</span><span class="font-mono text-yellow-800">~6 meses húmedos</span></div>
                                </div>
                                <p class="text-xs text-center mt-3 text-slate-500">La altitud es el principal factor diferenciador de los ecosistemas.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Suelos Section -->
                <section id="soils" class="content-section">
                    <div class="p-2">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">Tipos y Propiedades de Suelos</h2>
                        <p class="text-slate-600 mb-6 leading-relaxed">
                            La climosecuencia también define los tipos de suelo. La uniformidad del material geológico (gneises y esquistos) y un paisaje relativamente estable han dado lugar a tres grandes grupos de suelos dominantes. Seleccione un tipo de suelo para ver sus características.
                        </p>
                        <div class="grid md:grid-cols-2 gap-8 items-center">
                            <div>
                                <h3 class="text-xl font-semibold text-center text-slate-700 mb-2">Tipos de Suelo Dominantes</h3>
                                <div class="chart-container">
                                    <canvas id="soilTypesChart"></canvas>
                                </div>
                            </div>
                            <div class="bg-slate-50 p-4 rounded-lg shadow-sm min-h-[350px]">
                                <h3 class="text-xl font-semibold text-slate-700 mb-3">Detalles del Suelo</h3>
                                <div class="flex justify-center space-x-2 mb-4">
                                    <button class="soil-button bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm hover:bg-blue-200 transition">Haplustalfs</button>
                                    <button class="soil-button bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm hover:bg-green-200 transition">Hapludults</button>
                                    <button class="soil-button bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm hover:bg-amber-200 transition">Haplustepts</button>
                                </div>
                                <div id="soil-details" class="text-slate-600 space-y-2">
                                    <p>Seleccione un tipo de suelo para más información.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Erosión y Fragilidad Section -->
                <section id="erosion" class="content-section">
                    <div class="p-2">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">Desafíos: Erosión y Fragilidad Ambiental</h2>
                        <p class="text-slate-600 mb-6 leading-relaxed">
                           La intervención humana, especialmente la ganadería en laderas, ha intensificado la erosión. El estudio revela que, aunque gran parte de la erosión actual es ligera, el riesgo potencial es extremadamente alto si se pierde la cobertura vegetal. Esto define la fragilidad del ecosistema.
                        </p>
                        <div class="grid md:grid-cols-2 gap-8 items-center">
                             <div>
                                <h3 class="text-xl font-semibold text-center text-slate-700 mb-2">Niveles de Erosión Actual</h3>
                                 <div class="chart-container" style="max-width: 500px; height: 320px;">
                                    <canvas id="erosionChart"></canvas>
                                </div>
                            </div>
                             <div>
                                <h3 class="text-xl font-semibold text-center text-slate-700 mb-2">Fragilidad Ambiental de la Cuenca</h3>
                                <div class="chart-container">
                                    <canvas id="fragilityChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Zonificación Section -->
                <section id="zoning" class="content-section">
                   <div class="p-2">
                        <h2 class="text-2xl font-bold text-slate-800 mb-4">Recomendaciones: Zonificación Agroecológica</h2>
                        <p class="text-slate-600 mb-6 leading-relaxed">
                            Como síntesis del estudio, se propone una zonificación para el manejo sostenible. Las recomendaciones clasifican el territorio según su necesidad de preservación, rehabilitación o su aptitud para usos productivos, buscando un equilibrio entre la conservación y las actividades socioeconómicas.
                        </p>
                        <div class="grid md:grid-cols-2 gap-8 items-center">
                             <div>
                                <h3 class="text-xl font-semibold text-center text-slate-700 mb-2">Uso de la Tierra Recomendado</h3>
                                <div class="chart-container">
                                    <canvas id="zoningChart"></canvas>
                                </div>
                            </div>
                            <div id="zoning-details" class="bg-slate-50 p-6 rounded-lg shadow-sm space-y-3 min-h-[350px]">
                                 <h3 class="text-xl font-semibold text-slate-700 mb-2">Descripción de la Zona</h3>
                                 <p class="text-slate-600">Pase el cursor sobre el gráfico para ver los detalles de cada categoría de uso recomendado.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer class="text-center mt-8 text-sm text-slate-500">
            <p>Aplicación desarrollada con fines educativos y de divulgación.</p>
            <p>&copy; 2025 Análisis Interactivo de la Cuenca del Río Canoabo.</p>
        </footer>
    </div>
<script>
document.addEventListener('DOMContentLoaded', () => {

    const chartColors = {
        blue: 'rgba(59, 130, 246, 0.7)',
        green: 'rgba(16, 185, 129, 0.7)',
        yellow: 'rgba(234, 179, 8, 0.7)',
        amber: 'rgba(245, 158, 11, 0.7)',
        red: 'rgba(239, 68, 68, 0.7)',
        slate: 'rgba(100, 116, 139, 0.7)',
        
        blue_border: 'rgb(59, 130, 246)',
        green_border: 'rgb(16, 185, 129)',
        yellow_border: 'rgb(234, 179, 8)',
        amber_border: 'rgb(245, 158, 11)',
        red_border: 'rgb(239, 68, 68)',
        slate_border: 'rgb(100, 116, 139)',
    };
    
    let lifeZonesChartInstance, soilTypesChartInstance, erosionChartInstance, fragilityChartInstance, zoningChartInstance;

    const chartTooltip = {
        callbacks: {
            label: function(context) {
                let label = context.label || '';
                if (label) {
                    label += ': ';
                }
                if (context.parsed !== null) {
                    label += context.parsed + '%';
                }
                return label;
            }
        }
    };

    const soilData = {
        'Haplustalfs': {
            title: 'Haplustalfs (67%)',
            description: 'Son los suelos más extensos. Se encuentran típicamente en laderas intermedias y zonas con un período seco más marcado. Representan un estado de desarrollo pedogenético moderado.',
            properties: ['Fertilidad media a baja', 'Generalmente ácidos', 'Texturas medias (Francas)']
        },
        'Hapludults': {
            title: 'Hapludults (27%)',
            description: 'Comunes en zonas más húmedas y altas, como en áreas de bosque nublado. Muestran un mayor lavado de nutrientes y acumulación de materia orgánica en superficie (subgrupo Humic).',
            properties: ['Mayor lavado de bases', 'Acumulación de MO en altura', 'Suelos ácidos']
        },
        'Haplustepts': {
            title: 'Haplustepts (4%)',
            description: 'Suelos más jóvenes, ubicados principalmente en los valles, formados a partir de materiales aluviales recientes. Su desarrollo de perfiles es incipiente.',
            properties: ['Material parental reciente', 'Ubicados en valles', 'Desarrollo incipiente']
        }
    };
    
    const zoningData = {
        'Preservación Prioritaria': {
            details: 'Cubre el 49.8% de la cuenca. Incluye zonas de muy alta fragilidad y criticidad, como bosques nublados productores de agua y áreas con riesgo de inundación. Deben ser protegidas legalmente para garantizar los servicios ambientales.'
        },
        'Rehabilitación Necesaria': {
            details: 'Aproximadamente el 15% de la cuenca. Son áreas con erosión de moderada a fuerte, especialmente en faldas de montañas, que requieren restauración antes de destinarlas a otros usos.'
        },
        'Uso con Restricciones': {
            details: 'Representa el 19.5% de la cuenca. Son laderas bajas con fragilidad moderada aptas para usos conservacionistas como sistemas agroforestales y silvopastoriles.'
        },
        'Uso Agrícola Intensivo': {
            details: 'Solo el 5.8% de la cuenca, localizado en el fondo del valle. Son las tierras de mejor calidad, con baja fragilidad, aptas para cultivos más intensivos como hortalizas, cereales y leguminosas.'
        }
    };


    function createLifeZonesChart() {
        const ctx = document.getElementById('lifeZonesChart')?.getContext('2d');
        if (!ctx) return;
        lifeZonesChartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Bosque Húmedo Premontano', 'Bosque Seco Premontano', 'Bosque Seco Tropical'],
                datasets: [{
                    label: 'Distribución de Zonas de Vida',
                    data: [41, 31, 21], // Other 7% not specified, so normalized
                    backgroundColor: [chartColors.blue, chartColors.green, chartColors.yellow],
                    borderColor: [chartColors.blue_border, chartColors.green_border, chartColors.yellow_border],
                    borderWidth: 1,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: chartTooltip
                }
            }
        });
    }

    function createSoilTypesChart() {
        const ctx = document.getElementById('soilTypesChart')?.getContext('2d');
        if (!ctx) return;
        soilTypesChartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Haplustalfs', 'Hapludults', 'Haplustepts'],
                datasets: [{
                    label: 'Tipos de Suelo Dominantes',
                    data: [67.26, 27.1, 4.01],
                    backgroundColor: [chartColors.blue, chartColors.green, chartColors.amber],
                    borderColor: [chartColors.blue_border, chartColors.green_border, chartColors.amber_border],
                    borderWidth: 1,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: chartTooltip
                }
            }
        });
    }

    function createErosionChart() {
        const ctx = document.getElementById('erosionChart')?.getContext('2d');
        if (!ctx) return;
        erosionChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Ligera/Imperceptible', 'Moderada', 'Fuerte'],
                datasets: [{
                    label: 'Porcentaje de Superficie',
                    data: [74, 13, 11],
                    backgroundColor: [chartColors.green, chartColors.yellow, chartColors.red],
                    borderColor: [chartColors.green_border, chartColors.yellow_border, chartColors.red_border],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: chartTooltip
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) { return value + "%" }
                        }
                    }
                }
            }
        });
    }
    
    function createFragilityChart() {
        const ctx = document.getElementById('fragilityChart')?.getContext('2d');
        if (!ctx) return;
        fragilityChartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Alta a Muy Alta', 'Moderada', 'Baja'],
                datasets: [{
                    label: 'Nivel de Fragilidad Ambiental',
                    data: [50.02, 40.29, 8.05], // Other ~1.64% not specified
                    backgroundColor: [chartColors.red, chartColors.yellow, chartColors.green],
                    borderColor: [chartColors.red_border, chartColors.yellow_border, chartColors.green_border],
                    borderWidth: 1,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top' },
                    tooltip: chartTooltip
                }
            }
        });
    }
    
    function createZoningChart() {
        const ctx = document.getElementById('zoningChart')?.getContext('2d');
        if (!ctx) return;
        zoningChartInstance = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Preservación Prioritaria', 'Rehabilitación Necesaria', 'Uso con Restricciones', 'Uso Agrícola Intensivo'],
                datasets: [{
                    label: 'Uso de la Tierra Recomendado',
                    data: [49.76, 15, 19.49, 5.79],
                    backgroundColor: [chartColors.blue, chartColors.red, chartColors.yellow, chartColors.green],
                    borderColor: [chartColors.blue_border, chartColors.red_border, chartColors.yellow_border, chartColors.green_border],
                    borderWidth: 1,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        position: 'top',
                        labels: {
                            generateLabels: function(chart) {
                                const data = chart.data;
                                if (data.labels.length && data.datasets.length) {
                                    return data.labels.map(function(label, i) {
                                        const meta = chart.getDatasetMeta(0);
                                        const style = meta.controller.getStyle(i);
                                        return {
                                            text: label,
                                            fillStyle: style.backgroundColor,
                                            strokeStyle: style.borderColor,
                                            lineWidth: style.borderWidth,
                                            hidden: isNaN(data.datasets[0].data[i]) || meta.data[i].hidden,
                                            index: i
                                        };
                                    });
                                }
                                return [];
                            }
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                let value = context.parsed;
                                label += value.toFixed(2) + '%';
                                return label;
                            },
                            afterLabel: function(context) {
                                const label = context.chart.data.labels[context.dataIndex];
                                return zoningData[label]?.details.substring(0, 80) + '...';
                            }
                        }
                    }
                },
                onHover: (event, chartElement) => {
                    const canvas = event.native.target;
                    canvas.style.cursor = chartElement.length ? 'pointer' : 'default';
                    
                    const detailsContainer = document.getElementById('zoning-details');
                    if(chartElement.length > 0) {
                        const index = chartElement[0].index;
                        const label = zoningChartInstance.data.labels[index];
                        const data = zoningData[label];
                        if (data) {
                           detailsContainer.innerHTML = `
                                <h3 class="text-xl font-semibold text-slate-700 mb-2">${label}</h3>
                                <p class="text-slate-600">${data.details}</p>`;
                        }
                    } else {
                       detailsContainer.innerHTML = `
                            <h3 class="text-xl font-semibold text-slate-700 mb-2">Descripción de la Zona</h3>
                            <p class="text-slate-600">Pase el cursor sobre el gráfico para ver los detalles de cada categoría de uso recomendado.</p>`;
                    }
                }
            }
        });
    }

    const tabs = document.querySelectorAll('.tab-button');
    const sections = document.querySelectorAll('.content-section');

    function switchTab(tabId) {
        let chartCreated = false;

        tabs.forEach(tab => {
            tab.classList.toggle('active', tab.dataset.tab === tabId);
        });

        sections.forEach(section => {
            const isActive = section.id === tabId;
            section.classList.toggle('active', isActive);

            if (isActive) {
                switch(tabId) {
                    case 'climate':
                        if (!lifeZonesChartInstance) createLifeZonesChart();
                        break;
                    case 'soils':
                        if (!soilTypesChartInstance) createSoilTypesChart();
                        break;
                    case 'erosion':
                        if (!erosionChartInstance) createErosionChart();
                        if (!fragilityChartInstance) createFragilityChart();
                        break;
                    case 'zoning':
                        if (!zoningChartInstance) createZoningChart();
                        break;
                }
            }
        });
    }
    
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            switchTab(tab.dataset.tab);
        });
    });

    switchTab('overview'); 

    document.querySelectorAll('.soil-button').forEach(button => {
        button.addEventListener('click', (e) => {
            const soilType = e.target.textContent;
            const data = soilData[soilType];
            const container = document.getElementById('soil-details');
            if (data) {
                let propertiesHtml = data.properties.map(prop => `
                    <li class="flex items-start">
                        <span class="text-green-500 mr-2 mt-1">&#10004;</span>
                        <span>${prop}</span>
                    </li>
                `).join('');
                
                container.innerHTML = `
                    <h4 class="text-lg font-bold text-slate-800">${data.title}</h4>
                    <p class="text-sm mb-2">${data.description}</p>
                    <ul class="space-y-1 text-sm">${propertiesHtml}</ul>
                `;
            }
        });
    });
});
</script>
    <!-- N8N Chat Integration -->
	<script type="module">
		import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

		createChat({
			webhookUrl: 'https://n8n-x7c3.onrender.com/webhook/d40c3554-2ec2-4a43-9719-27210a6445d1/chat',
			target: '#n8n-chat-container',
			initialMessages: [
				'¡Hola! Soy tu consultor de Datos. ¿Qué dato quieres consultar sobre la Cuenca?'
			],
			theme: {
				primary: '#3b82f6', // Tailwind Blue 500
				background: '#ffffff',
				text: '#1f2937'     // Tailwind Gray 800
			},
			i18n: {
				en: {
					title: 'Consulta SIG',
					subtitle: 'Consulta geográfica de la capa Suelo8',
					footer: '',
					getStarted: 'Iniciar consulta',
					inputPlaceholder: 'Escribe tu consulta...',
				}
			}
		});
	</script>
</body>
</html>